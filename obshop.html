<!DOCTYPE html>
<html lang="en">
<!--   

Task list
=========

Think about code reuse and start on shopping module

Here it is, obShop

Simple at the moment.

1. Move item up or down in list.
2. Make a stock buy position update thing.

 
-->



<head>
  <meta charset="UTF-8">
  <title>GoShop</title>

  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>



  <link id="theCss" rel="stylesheet" href="./obshop.css">



</head>

<script src="./obshop.js"></script>

<body>

  OBSHOP


  <div id="topDiv" class="topDiv">
    <div class="goDiv">
      <div id="divItems" class="itemDiv" style="margin-top: 10px;">
        ITEM DIV
      </div>
      <div id="divItems2" class="itemDiv" style="margin-top: 10px;">
        ITEM DIV2
      </div>
    </div>
  </div>

  <script>
    function focusButton(e) {
      let arr = document.getElementsByClassName("btn-item");
      for (let i = 0; i < arr.length; i++) {
        arr[i].classList.remove("hasFocus");
      }
      e.currentTarget.classList.add("hasFocus");

     // obButton.test();
    }

    class obObject {
      constructor(type) {  // Class constructor
        this._type = type;  // Class body/properties
      }
      get(type) { return this._type }
    }

    class obButton extends obObject {
      constructor() {
        super('obButton');
        this.model = mod;
      }

      static test() { alert(this.type) }
    }

    function getStamp() {

      let x = Math.random() * 10000000000;
      x = x.toFixed(0);
      return x;
    }

    class item {
      constructor(name) {
        this._id = getStamp();
        if (!name)
          this._name = "unknown";
        else this._name = name;
        this._description = "unknown";
        this._inStock = 0;
        this._toBuy = 0;
      }
      get id() {
        return this._id;
      }
      set name(newName) {
        this._name = newName
      }
      get name() {
        return this._name;
      }
      set name(newName) {
        this._name = newName
      }
      get description() {
        return this._description;
      }
      set description(newDescription) {
        this._description = newDescription;
      }
      get inStock() {
        return this._inStock;
      }
      set inStock(newInStock) {
        this._inStock = newInStock;
      }
      get toBuy() {
        return this._toBuy;
      }
      set toBuy(newToBuy) {
        this._to_buy = newToBuy;;
      }

    }

    const Global = {
      itemArray:[],
      productArray:[],
      depotArray:[],
      superArray:[]
    };

    Global.test = "just a test";
    Global.extra = "some extra";

    let a = [];

    for (let i = 0; i < 20; i++) {
      t = "item " + i;
      test = new item(t);
      Global.itemArray.push(test);
    }
    Global.productArray = Global.itemArray;




    
    function displayList(ab, theDiv, type) {

      ab.forEach(item => {
        // console.log(item.name);

        let newButton = document.createElement('button');
        theDiv.appendChild(newButton);

        buttonId = "item_" + item.id;
        newButton.id = buttonId;
        newButton.classList.add("btn");
        newButton.classList.add("btn-success");
        newButton.classList.add(type);
        newButton.innerHTML = item.name;

        const element = gid(buttonId);
        newButton.addEventListener("click", focusButton);
      });


    }

    displayList(Global.itemArray, gid("divItems"), "btn-item");
    displayList(Global.productArray, gid("divItems2"), "btn-product");


  </script>

</body>

</html>